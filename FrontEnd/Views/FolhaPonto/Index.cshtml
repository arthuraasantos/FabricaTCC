@using Dominio.Model;

@{
    ViewBag.Title = "Folhas de Ponto";
    Layout = "~/Views/Templates/_TemplateSistema.cshtml";
}

@model List<FolhaPonto>

<h1 class="page-header">Listagem de Folhas de Ponto</h1>

<div class="navbar">
    @Html.ActionLink("Iniciar folha de ponto", "Iniciar", "FolhaPonto", new { @class = "btn btn-outline btn-default" })
    @*<br />
        <br />*@
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="dataTable_wrapper">
                    <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                        <thead>
                            <tr>
                                <th>Data de início</th>
                                <th>Data do fim</th>
                                <th>Aberto?</th>
                                <th>Operações</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td> @item.DataInicio.ToString("dd/MM/yyyy")</td>
                                    <td> @item.DataFim.GetValueOrDefault().ToString("dd/MM/yyyy")</td>
                                    <td>
                                        @if (item.Aberto)
                                        {
                                            @Html.Display("Sim")
                                        }
                                        else
                                        {
                                            @Html.Display("Não")
                                        }
                                    </td>
                                    <td>
                                        @if (item.Aberto)
                                        {
                                            <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target=".bs-example-modal-sm">Fechar folha</button>
                                            @*@Html.ActionLink("Fechar", "Fechar", new { id = item.Id }, new { @class = "btn btn-outline btn-warning" })*@
                                        }
                                    <td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- /.col-lg-12 -->
</div>

<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            @using (Html.BeginForm("Fechar", "FolhaPonto", FormMethod.Post))
            {
                <div class="modal-body">

                    <div class="form-group">
                        @Html.Label("Data de fechamento")
                        @Html.TextBox("Data", "", new { @type = "email", @class = "form-control", @placeholder = "Email", @readonly = "readonly" })
                    </div>
                    <div class="form-group">
                        @Html.Label("Senha")
                        @Html.Password("Senha", "", new { @type = "password", @class = "form-control", @placeholder = "senha" })
                    </div>

                </div>
                <div class="modal-footer">
                    <input type="submit" value="Confirmar" class="btn btn-outline btn-success form-control" />
                </div>
            }
        </div>
    </div>
</div>
