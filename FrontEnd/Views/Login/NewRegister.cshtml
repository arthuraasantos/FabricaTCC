<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>NewRegister</title>
    <script src="~/Scripts/jquery.min.js"></script>
    <script src="~/Scripts/bootstrap.js"></script>
    <script src="~/Scripts/Login/newregister.js"></script>
    <script src="~/Scripts/angular/angular.js"></script>

    <style>
        .form-control{
            margin-bottom:3px;
        }

        
        .form-new-register{
              background-image: url(../../img/iphone6-dedo.png);
              background-size: 600px;
              background-repeat:no-repeat;
              height:1000px;
              width:600px;
              margin-left: 15%;
        }

        .form-data{
            margin-top:15%;
            margin-left: 44%;
        }

        .body ng-scope{
              background: url(../../img/background-new_register.jpg);
              background-repeat:no-repeat;

              width: 100%;
              height: 100%;
            margin:auto;
        }

        .btn-success{
            width: 280px;
        }

        .loader{
            padding: 10px;
            margin-top:5%;
            margin-left: 25%;
        }

        .alert{
            margin-top: 5px;
            width: 280px;
            height: auto;
        }

        .glyphicon-circle-arrow-left{
            font-size:30px;
            margin-left:38%;
        }
    </style>
</head>
<body class="body" ng-app="appRegister" ng-controller="registerCtrl">
    <div class="container">
        <h1>Opa, que bom vê-lo aqui. O cadastro é rápido, vamos lá... </h1>
        <br />
        <div class="col-lg-4 col-lg-offset-4 form-new-register">
            <br />
            <form action="Register" method="post" name="registerForm">
                
                <div class="form-data">
                    <a href="~/Login/Index" class="glyphicon glyphicon-circle-arrow-left"></a>
                    <br />
                    <br />
                    <strong><label>Informe os dados da empresa</label></strong>
                    <input type="text" class="form-control" id="FantasyName" name="FantasyName" placeholder="Nome da empresa" ng-model="register.FantasyName" ng-required="true"/>
                    <br />
                    <br />
                    <strong><label>Dados para acesso</label></strong>
                    <input type="text" class="form-control" id="EmployeeName" name="EmployeeName" placeholder="Nome" ng-model="register.EmployeeName" ng-required="true" />
                    <input type="text" class="form-control" id="EmployeeCPF" name="EmployeeCPF" placeholder="Cpf" ng-model="register.EmployeeCPF" ng-required="true" />
                    
                    <input type="email" class="form-control" id="EmployeeEmail" name="EmployeeEmail" placeholder="E-mail" ng-model="register.EmployeeEmail" ng-required="true" />
                    <br />
                    <button id="btnlogin" type="button" ng-click="registerUser(register)" class="btn btn-outline btn-success btn-block" ng-disabled="!registerForm.$valid">Registre-me</button>

                    <div class="loader" style="display: none;">
                        <h4>Cadastrando...</h4>
                        <br>
                    	<img src="~/img/ajax-loader-tower.gif" style="margin-left: 10%;"/>
                        <br>
                	</div>
                    <div class="alert alert-info" style="display: none;"> {{ message }}</div>
                    <div class="alert alert-danger"  style="display: none;"> {{ message }}</div>                        
                </div>
            </form>
        </div>
    </div>


    <script>
        var app = angular.module('appRegister',[]);
        app.controller('registerCtrl', function($scope, $http) {
            $scope.message = "";

            $scope.registerUser = function (registerDTO){
                $(".loader").show();
                var response = $http.post("Register",registerDTO
                    ).success(function (data, status, headers, config){
                        $scope.message = data.Message;
                        if (data.isValid) {
                            alert('success'+data.Message);
                            $(".alert alert-info").show();
                        }
                        else
                        {
                            $(".alert alert-danger").show(); 
                        }
                        
                        $(".loader").hide();
                    });
                    response.error(function (data, status, headers, config) {
                        alert("teste");
                    });

                    // .       (function (data,status,headers, config){
                    //     alert('error');
                    //    $scope.message = data.Message;
                    //     $(".alert alert-danger").show(); 
                    // });
            }
        });
    </script>
</body>
</html>



